import{_ as p,o as a,c,a as t,e as u,t as l,g as _,F as h,i as M,b as A,r as f}from"./index-NdDJ3vZo.js";import{M as g}from"./bootstrap.esm-TTjMTX3M.js";const $={props:["tempUser","delUser"],data(){return{delModalAccount:null}},methods:{openDelModal(){this.delModalAccount.show()},closeDelModal(){this.delModalAccount.hide()}},mounted(){this.delModalAccount=new g(this.$refs.delAccountModal)}},U={id:"delAccountModal",ref:"delAccountModal",class:"modal fade",tabindex:"-1","aria-labelledby":"delAccountModalLabel","aria-hidden":"true"},v={class:"modal-dialog"},w={class:"modal-content border-0"},y=t("div",{class:"modal-header bg-danger text-white"},[t("h5",{id:"delAccountModalLabel",class:"modal-title"},[t("span",null,"刪除帳戶")]),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),D={class:"modal-body"},x={class:"text-danger"},V={class:"modal-footer"},E=t("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function k(e,s,n,b,d,r){return a(),c("div",U,[t("div",v,[t("div",w,[y,t("div",D,[u(" 是否刪除 "),t("strong",x,l(n.tempUser.name),1),u(" 帳戶(刪除後將無法恢復)。 ")]),t("div",V,[E,t("button",{type:"button",class:"btn btn-danger",onClick:s[0]||(s[0]=(...i)=>n.delUser&&n.delUser(...i))},"確認刪除")])])])],512)}const I=p($,[["render",k]]);var L={VITE_API_URL:"https://wine-project-tmiy.onrender.com",VITE_API_NAME:"",BASE_URL:"/Wine-project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API_URL:m}=L,C={name:"AdminAccountsView",components:{DelAccountModal:I},data(){return{title:"帳戶管理",users:[],tempUser:{}}},mounted(){this.getAccounts()},methods:{getAccounts(){const e=`${m}/users`;_.get(e).then(s=>{console.log(s.data),this.users=s.data}).catch(()=>{alert("取得帳戶資訊失敗")})},delUser(){const e=`${m}/users/${this.tempUser.id}`;_.delete(e).then(s=>{alert("刪除成功"),this.$refs.delModal.closeDelModal(),this.getAccounts()}).catch(()=>{alert("刪除失敗")})},openModal(e){this.tempUser={...e},this.$refs.delModal.openDelModal()}}},R={class:"row"},B={class:"mt-3"},N={class:"table mt-4"},P=t("thead",null,[t("tr",null,[t("th",{width:"120"},"身分"),t("th",{width:"120"},"名稱"),t("th",{width:"120"},"電子信箱"),t("th",{width:"120"},"刪除帳戶")])],-1),S={class:"btn-group"},T=["onClick"];function j(e,s,n,b,d,r){const i=f("Del-Account-Modal");return a(),c(h,null,[t("div",R,[t("h1",B,l(d.title),1),t("table",N,[P,t("tbody",null,[(a(!0),c(h,null,M(d.users,o=>(a(),c("tr",{key:o.id},[t("td",null,l(o.role),1),t("td",null,l(o.username),1),t("td",null,l(o.email),1),t("td",null,[t("div",S,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:F=>r.openModal(o)}," 刪除 ",8,T)])])]))),128))])])]),A(i,{"temp-user":d.tempUser,"del-user":r.delUser,ref:"delModal"},null,8,["temp-user","del-user"])],64)}const q=p(C,[["render",j]]);export{q as default};
