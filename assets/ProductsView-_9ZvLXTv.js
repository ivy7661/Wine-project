import{_ as h,o as a,c as u,a as t,y as l,M as i,B as f,e as P,t as m,g as _,F as v,i as V,b as y,r as w,p as U,d as k}from"./index-O1-0fp33.js";import{M as g}from"./bootstrap.esm-uhsrVe-H.js";import{h as N}from"./header_line-xclFtJG4.js";const D={props:["tempProduct","updateProduct","isNew"],data(){return{modalProduct:null,editProduct:{image:"",flavor:[],taste:{tannin:"",body:"",acidity:"",sweet:""}}}},methods:{openModal(){this.modalProduct.show()},closeModal(){this.modalProduct.hide()}},mounted(){this.modalProduct=new g(this.$refs.productModal)},watch:{tempProduct(){this.editProduct=this.tempProduct}}},S={id:"productModal",ref:"productModal",class:"modal fade",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true"},C={class:"modal-dialog modal-xl"},I={class:"modal-content border-0"},L={class:"modal-header bg-dark text-white"},E={id:"productModalLabel",class:"modal-title"},R={key:0},A={key:1},B=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),O={class:"modal-body"},T={class:"row"},j={class:"col-sm-4"},F={class:"mb-3"},J=t("label",{for:"image",class:"form-label"},"圖片",-1),W=["src"],q={class:"col-sm-8"},z={class:"mb-3"},G=t("label",{for:"title",class:"form-label"},"產品名稱",-1),H={class:"mb-3"},K=t("label",{for:"engtitle",class:"form-label"},"英文名稱",-1),Q={class:"row"},X={class:"mb-3 col-md-4"},Y=t("label",{for:"category",class:"form-label"},"分類",-1),Z={class:"mb-3 col-md-4"},$=t("label",{for:"place",class:"form-label"},"產區",-1),tt={class:"mb-3 col-md-4"},ot=t("label",{for:"price",class:"form-label"},"售價",-1),et={class:"row"},st={class:"mb-3 col-md-6"},lt=t("label",{for:"village",class:"form-label"},"酒莊",-1),dt={class:"mb-3 col-md-6"},it=t("label",{for:"grape",class:"form-label"},"葡萄品種",-1),nt=t("hr",null,null,-1),ct={class:"row"},rt={class:"mb-3 col-md-4"},at=t("label",{for:"flavor",class:"form-label"},"風味",-1),ut={class:"mb-3 col-md-8"},mt=t("label",{for:"food",class:"form-label"},"搭餐",-1),pt={class:"row mb-3"},_t={class:"col-md-3"},ht=t("label",{for:"tannin",class:"form-label"},"單寧",-1),bt={class:"col-md-3"},ft=t("label",{for:"body",class:"form-label"},"酒體",-1),Pt={class:"col-md-3"},vt=t("label",{for:"acidity",class:"form-label"},"酸度",-1),yt={class:"col-md-3"},wt=t("label",{for:"sweet",class:"form-label"},"甜度",-1),gt={class:"row mb-3"},Mt={class:"col-md-3"},xt=t("label",{for:"num",class:"form-label"},"數量",-1),Vt={class:"col-md-3"},Ut=t("label",{for:"star",class:"form-label"},"評分",-1),kt={class:"col-md-3 mt-5 mb-3"},Nt={class:"form-check"},Dt=t("label",{class:"form-check-label",for:"is_enabled"},"是否熱銷",-1),St={class:"col-md-3 mt-5 mb-3"},Ct={class:"form-check"},It=t("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1),Lt={class:"modal-footer"},Et=t("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function Rt(d,o,n,b,e,c){return a(),u("div",S,[t("div",C,[t("div",I,[t("div",L,[t("h5",E,[n.isNew?(a(),u("span",R,"新增產品")):(a(),u("span",A,"編輯產品"))]),B]),t("div",O,[t("div",T,[t("div",j,[t("div",F,[J,l(t("input",{id:"image","onUpdate:modelValue":o[0]||(o[0]=s=>e.editProduct.image=s),type:"text",class:"form-control mb-2",placeholder:"請輸入圖片連結"},null,512),[[i,e.editProduct.image]]),t("img",{class:"img-fluid",src:e.editProduct.image},null,8,W)])]),t("div",q,[t("div",z,[G,l(t("input",{id:"title","onUpdate:modelValue":o[1]||(o[1]=s=>e.editProduct.chineseName=s),type:"text",class:"form-control",placeholder:"請輸入產品名稱"},null,512),[[i,e.editProduct.chineseName]])]),t("div",H,[K,l(t("input",{id:"engtitle","onUpdate:modelValue":o[2]||(o[2]=s=>e.editProduct.englishName=s),type:"text",class:"form-control",placeholder:"請輸入英文名稱"},null,512),[[i,e.editProduct.englishName]])]),t("div",Q,[t("div",X,[Y,l(t("input",{id:"category","onUpdate:modelValue":o[3]||(o[3]=s=>e.editProduct.wineStyle=s),type:"text",class:"form-control",placeholder:"請輸入分類"},null,512),[[i,e.editProduct.wineStyle]])]),t("div",Z,[$,l(t("input",{id:"place","onUpdate:modelValue":o[4]||(o[4]=s=>e.editProduct.place=s),type:"text",class:"form-control",placeholder:"請輸入產區"},null,512),[[i,e.editProduct.place]])]),t("div",tt,[ot,l(t("input",{id:"price","onUpdate:modelValue":o[5]||(o[5]=s=>e.editProduct.price=s),type:"number",min:"0",class:"form-control",placeholder:"請輸入售價"},null,512),[[i,e.editProduct.price,void 0,{number:!0}]])])]),t("div",et,[t("div",st,[lt,l(t("input",{id:"village","onUpdate:modelValue":o[6]||(o[6]=s=>e.editProduct.village=s),type:"text",class:"form-control",placeholder:"請輸入酒莊"},null,512),[[i,e.editProduct.village]])]),t("div",dt,[it,l(t("input",{id:"grape","onUpdate:modelValue":o[7]||(o[7]=s=>e.editProduct.grape=s),class:"form-control",placeholder:"請輸入葡萄品種"},null,512),[[i,e.editProduct.grape]])])]),nt,t("div",ct,[t("div",rt,[at,l(t("input",{id:"flavor","onUpdate:modelValue":o[8]||(o[8]=s=>e.editProduct.flavor=s),type:"text",class:"form-control",placeholder:"請輸入風味"},null,512),[[i,e.editProduct.flavor]])]),t("div",ut,[mt,l(t("input",{id:"food","onUpdate:modelValue":o[9]||(o[9]=s=>e.editProduct.food=s),type:"text",class:"form-control",placeholder:"請輸入搭餐"},null,512),[[i,e.editProduct.food]])])]),t("div",pt,[t("div",_t,[ht,l(t("input",{id:"tannin","onUpdate:modelValue":o[10]||(o[10]=s=>e.editProduct.taste.tannin=s),type:"text",class:"form-control",placeholder:"請輸入單寧"},null,512),[[i,e.editProduct.taste.tannin]])]),t("div",bt,[ft,l(t("input",{id:"body","onUpdate:modelValue":o[11]||(o[11]=s=>e.editProduct.taste.body=s),type:"text",class:"form-control",placeholder:"請輸入酒體"},null,512),[[i,e.editProduct.taste.body]])]),t("div",Pt,[vt,l(t("input",{id:"acidity","onUpdate:modelValue":o[12]||(o[12]=s=>e.editProduct.taste.acidity=s),class:"form-control",placeholder:"請輸入酸度"},null,512),[[i,e.editProduct.taste.acidity]])]),t("div",yt,[wt,l(t("input",{id:"sweet","onUpdate:modelValue":o[13]||(o[13]=s=>e.editProduct.taste.sweet=s),class:"form-control",placeholder:"請輸入甜度"},null,512),[[i,e.editProduct.taste.sweet]])])]),t("div",gt,[t("div",Mt,[xt,l(t("input",{id:"num","onUpdate:modelValue":o[14]||(o[14]=s=>e.editProduct.num=s),type:"number",min:"0",class:"form-control",placeholder:"請輸入數量"},null,512),[[i,e.editProduct.num,void 0,{number:!0}]])]),t("div",Vt,[Ut,l(t("input",{id:"star","onUpdate:modelValue":o[15]||(o[15]=s=>e.editProduct.star=s),type:"number",min:"1",max:"5",class:"form-control",placeholder:"請輸入評分"},null,512),[[i,e.editProduct.star,void 0,{number:!0}]])]),t("div",kt,[t("div",Nt,[l(t("input",{id:"is_enabled","onUpdate:modelValue":o[16]||(o[16]=s=>e.editProduct.is_hot=s),class:"form-check-input",type:"checkbox","true-value":1,"false-value":0},null,512),[[f,e.editProduct.is_hot]]),Dt])]),t("div",St,[t("div",Ct,[l(t("input",{id:"is_enabled","onUpdate:modelValue":o[17]||(o[17]=s=>e.editProduct.is_enabled=s),class:"form-check-input",type:"checkbox","true-value":1,"false-value":0},null,512),[[f,e.editProduct.is_enabled]]),It])])])])])]),t("div",Lt,[Et,t("button",{type:"button",class:"btn btn-primary",onClick:o[18]||(o[18]=(...s)=>n.updateProduct&&n.updateProduct(...s))},"確認")])])])],512)}const At=h(D,[["render",Rt]]),Bt={props:["tempProduct","delProduct"],data(){return{delModalProduct:null}},methods:{openDelModal(){this.delModalProduct.show()},closeDelModal(){this.delModalProduct.hide()}},mounted(){this.delModalProduct=new g(this.$refs.delProductModal)}},Ot={id:"delProductModal",ref:"delProductModal",class:"modal fade",tabindex:"-1","aria-labelledby":"delProductModalLabel","aria-hidden":"true"},Tt={class:"modal-dialog"},jt={class:"modal-content border-0"},Ft=t("div",{class:"modal-header bg-danger text-white"},[t("h5",{id:"delProductModalLabel",class:"modal-title"},[t("span",null,"刪除產品")]),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Jt={class:"modal-body"},Wt={class:"text-danger"},qt={class:"modal-footer"},zt=t("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function Gt(d,o,n,b,e,c){return a(),u("div",Ot,[t("div",Tt,[t("div",jt,[Ft,t("div",Jt,[P(" 是否刪除 "),t("strong",Wt,m(n.tempProduct.chineseName),1),P(" 商品(刪除後將無法恢復)。 ")]),t("div",qt,[zt,t("button",{type:"button",class:"btn btn-danger",onClick:o[0]||(o[0]=(...s)=>n.delProduct&&n.delProduct(...s))},"確認刪除")])])])],512)}const Ht=h(Bt,[["render",Gt]]);var Kt={VITE_API_URL:"https://wine-project-tmiy.onrender.com",VITE_REPO_NAME:"Wine-project",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API_URL:p}=Kt,Qt={name:"AdminProductsView",components:{ProductModal:At,DelModal:Ht},data(){return{title:"商品管理",headerLine:N,products:[],tempProduct:{image:"",flavor:[],taste:{tannin:"",body:"",acidity:"",sweet:""}},pages:{},modalProduct:null,delModalProduct:null,isNew:!1,newProduct:{}}},mounted(){this.getData()},methods:{getData(){const d=`${p}/products`;_.get(d).then(o=>{console.log(o.data),this.products=o.data}).catch(()=>{alert("取得產品資訊失敗")})},updateProduct(){let d=`${p}/products`,o="post";this.isNew||(d=`${p}/products/${this.tempProduct.id}`,o="put"),this.newProduct=JSON.parse(JSON.stringify(this.tempProduct)),typeof this.newProduct.flavor=="string"&&(this.newProduct.flavor=this.newProduct.flavor.split(",")),typeof this.newProduct.food=="string"&&(this.newProduct.food=this.newProduct.food.split(",")),typeof this.newProduct.grape=="string"&&(this.newProduct.grape=this.newProduct.grape.split(",")),_[o](d,this.newProduct).then(n=>{alert("新增/修改成功"),this.getData(),this.$refs.pModal.closeModal()}).catch(()=>{alert("新增/修改失敗")})},openModal(d,o){d==="new"?(this.tempProduct={image:"",flavor:[],taste:{tannin:"",body:"",acidity:"",sweet:""}},this.isNew=!0,this.$refs.pModal.openModal()):d==="edit"?(this.tempProduct={...o},this.isNew=!1,this.$refs.pModal.openModal()):d==="delete"&&(this.tempProduct={...o},this.$refs.delModal.openDelModal())},delProduct(){const d=`${p}/products/${this.tempProduct.id}`;_.delete(d).then(o=>{alert("刪除成功"),this.$refs.delModal.closeDelModal(),this.getData()}).catch(()=>{alert("刪除失敗")})},createImages(){this.tempProduct.imagesUrl=[],this.tempProduct.imagesUrl.push("")}}},Xt=d=>(U("data-v-2569a696"),d=d(),k(),d),Yt={class:"row"},Zt={class:"my-3"},$t={class:"header-line"},to=["src"],oo={class:"text-end mt-4"},eo={class:"row"},so={class:"table mt-4 mx-2"},lo=Xt(()=>t("thead",{class:"table-light"},[t("tr",null,[t("th",{width:"120"},"分類"),t("th",{width:"300"},"產品名稱"),t("th",{width:"120"},"售價"),t("th",{width:"120",class:"text-center"},"編輯")])],-1)),io={class:"text-center"},no={class:"btn-group"},co=["onClick"],ro=["onClick"];function ao(d,o,n,b,e,c){const s=w("Product-Modal"),M=w("Del-Modal");return a(),u(v,null,[t("div",Yt,[t("h1",Zt,m(e.title),1),t("div",$t,[t("img",{src:e.headerLine,alt:"header line"},null,8,to)]),t("div",oo,[t("button",{class:"btn btn-primary",onClick:o[0]||(o[0]=r=>c.openModal("new"))},"建立新的產品")]),t("div",eo,[t("table",so,[lo,t("tbody",null,[(a(!0),u(v,null,V(e.products,r=>(a(),u("tr",{key:r.id},[t("td",null,m(r.wineStyle),1),t("td",null,m(r.chineseName),1),t("td",null,m(r.price),1),t("td",io,[t("div",no,[t("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:x=>c.openModal("edit",r)}," 編輯 ",8,co),t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:x=>c.openModal("delete",r)}," 刪除 ",8,ro)])])]))),128))])])])]),y(s,{"temp-product":e.tempProduct,"update-product":c.updateProduct,"is-New":e.isNew,ref:"pModal"},null,8,["temp-product","update-product","is-New"]),y(M,{"temp-product":e.tempProduct,"del-product":c.delProduct,ref:"delModal"},null,8,["temp-product","del-product"])],64)}const _o=h(Qt,[["render",ao],["__scopeId","data-v-2569a696"]]);export{_o as default};
