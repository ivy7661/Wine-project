import{_,g as u,c as p,a as t,b as s,w as a,r as d,o as h,d as n,p as f,e as v}from"./index-KDcbRjT1.js";import{S as k}from"./sweetalert2.all-edPz5k6j.js";import{_ as g}from"./Logo-PzWtV9KY.js";const $={name:"AdminLayout",components:{},data(){return{title:"後台頁面"}},mounted(){const o=document.cookie.replace(/(?:(?:^|.*;\s*)adminToken\s*=\s*([^;]*).*$)|^.*$/,"$1"),i=document.cookie.replace(/(?:(?:^|.*;\s*)adminId\s*=\s*([^;]*).*$)|^.*$/,"$1");!o||!i?this.logout():(u.defaults.headers.common.Authorization=`Bearer ${o}`,this.adminCheck(i))},methods:{adminCheck(o){const i=`https://wine-project-tmiy.onrender.com/600/users/${o}`;this.$http.get(i).then(c=>{c.data.role!=="admin"&&this.logout()}).catch(()=>{this.logout()})},logout(){document.cookie=`adminToken=0; expires=${new Date("2000/1/1 12:00")}; path=/`,document.cookie=`adminId=0; expires=${new Date("2000/1/1 12:00")}; path=/`,k.fire({title:"無授權，請重新登入",text:"",icon:"error"}),this.$router.push("/adminLogin")}}},l=o=>(f("data-v-d033f791"),o=o(),v(),o),x={class:"container-fluid"},w={class:"row vh-100"},C={class:"col-2 bg-accent-brown pt-5"},I=l(()=>t("div",{class:"text-center"},[t("img",{src:g,alt:"logo",class:"img-fluid mb-6 px-2 logo"})],-1)),L={class:"nav flex-column px-2"},S={class:"nav-item"},V={class:"nav-item"},b={class:"nav-item"},y={class:"nav-item"},B={class:"nav-item"},R={class:"nav-item"},T={class:"nav-item mt-5"},A=l(()=>t("span",{class:"material-icons"}," logout ",-1)),N={class:"col-10 py-5"},D={class:"container"};function j(o,i,c,z,E,m){const e=d("RouterLink"),r=d("RouterView");return h(),p("div",x,[t("div",w,[t("div",C,[I,t("ul",L,[t("li",S,[s(e,{to:"/admin/accounts",class:"nav-link"},{default:a(()=>[n("帳戶管理")]),_:1})]),t("li",V,[s(e,{to:"/admin/products",class:"nav-link"},{default:a(()=>[n("商品管理")]),_:1})]),t("li",b,[s(e,{to:"/admin/orders",class:"nav-link"},{default:a(()=>[n("訂單管理")]),_:1})]),t("li",y,[s(e,{to:"/admin/comments",class:"nav-link"},{default:a(()=>[n("評論管理")]),_:1})]),t("li",B,[s(e,{to:"/admin/sales",class:"nav-link"},{default:a(()=>[n("銷售數據")]),_:1})]),t("li",R,[s(e,{to:"/",class:"nav-link"},{default:a(()=>[n("回前台首頁")]),_:1})]),t("li",T,[s(e,{to:"/adminLogin",class:"nav-link d-flex align-items-center",onClick:m.logout},{default:a(()=>[A,n("登出")]),_:1},8,["onClick"])])])]),t("div",N,[t("div",D,[s(r)])])])])}const H=_($,[["render",j],["__scopeId","data-v-d033f791"]]);export{H as default};
