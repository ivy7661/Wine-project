import{S as f}from"./sweetalert2.all-Uk-ha3lF.js";import{_ as v,m as g,c as w,a as e,b as t,w as i,h as a,r as n,o as V,n as h,i as x,v as k}from"./index-ZoMiIMOt.js";import{u as y}from"./user-ydOJ57HE.js";import{u as C}from"./regex-pcAWi6j3.js";import"./helpers-F0ufIW4w.js";const L="/Wine-project/assets/vertical_line--EMLQGjN.svg",R={name:"LoginView",components:{},data(){return{verticalLine:L,title:"登入頁",isLoading:!1,isRemember:!1,userData:{email:"",password:""}}},methods:{...g(y,["setUser","setUserCookie"]),login(){this.$http.post("http://localhost:3001/login",this.userData).then(s=>{s.data.accessToken&&s.data.user.role==="user"?(this.setUserCookie(s.data.user.id,s.data.accessToken),this.setUser(s.data.user),this.$router.replace("/")):f.fire({title:"登入失敗",text:"",icon:"error"})}).catch(s=>{var c;console.log(s.response),f.fire({title:((c=s.response)==null?void 0:c.data)||"登入失敗",text:"",icon:"error"})})},isPasswordRule(r){return C.test(r)?!0:"密碼長度為 6 ~ 12 碼，需包含英文及數字"}}},D={class:"row justify-content-center"},U=e("h2",{class:"mt-5 font-weight-normal fw-bold text-center"},"歡迎來到 Vin Chateau",-1),E=e("h2",{class:"mt-0 mb-5 font-weight-normal fw-bold text-center"},"若要開始購物，請先登入",-1),S={class:"col-5 py-4"},F={class:"form-floating mb-3"},M=e("label",{for:"email"},"帳號",-1),N={class:"form-floating"},j=e("label",{for:"password"},"密碼",-1),B=e("button",{class:"btn btn-lg btn-primary w-100 mt-3",type:"submit"}," 登入 ",-1),P={class:"checkbox mb-3"},T={for:"isRemember"},G={class:"text-center"},q={class:"col-2 text-center"},z=["src"],A={class:"col-5 py-4"},Q=e("button",{class:"btn btn-lg btn-primary w-100 mt-3",type:"submit"}," 使用 Google 快速登入 ",-1),W={class:"text-center mt-3"},H=e("p",{class:"m-0"},"當您使用 Vin Chateau 購物",-1);function I(r,s,c,J,o,m){const u=n("VeeField"),p=n("ErrorMessage"),d=n("RouterLink"),b=n("VeeForm");return V(),w("div",D,[U,E,e("div",S,[t(b,{ref:"form-login",class:"form-signin",onSubmit:m.login},{default:i(({errors:_})=>[e("div",F,[t(u,{id:"email",type:"email",name:"帳號",class:h(["form-control",{"is-invalid":_.帳號}]),placeholder:"請輸入 Email",rules:"email|required",autofocus:"",modelValue:o.userData.email,"onUpdate:modelValue":s[0]||(s[0]=l=>o.userData.email=l)},null,8,["class","modelValue"]),M,t(p,{name:"帳號",class:"invalid-feedback"})]),e("div",N,[t(u,{id:"password",name:"密碼",type:"password",class:h(["form-control",{"is-invalid":_.密碼}]),placeholder:"請輸入密碼",autocomplete:"false",rules:m.isPasswordRule,modelValue:o.userData.password,"onUpdate:modelValue":s[1]||(s[1]=l=>o.userData.password=l)},null,8,["class","rules","modelValue"]),j,t(p,{name:"密碼",class:"invalid-feedback"})]),B,e("div",P,[e("label",T,[x(e("input",{id:"isRemember",type:"checkbox",value:"false","onUpdate:modelValue":s[2]||(s[2]=l=>o.isRemember=l)},null,512),[[k,o.isRemember]]),a(" 記住我 ")]),t(d,{to:"/forgot",class:"p-2 float-end"},{default:i(()=>[a("忘記密碼")]),_:1})]),e("div",G,[a(" 還不是會員嗎?  "),t(d,{to:"/register",class:"p-2"},{default:i(()=>[a("立即註冊新帳號")]),_:1})])]),_:1},8,["onSubmit"])]),e("div",q,[e("img",{src:o.verticalLine,alt:"vertical Line"},null,8,z)]),e("div",A,[Q,e("div",W,[H,e("p",null,[a("代表您同意 Vin Chateau "),t(d,{to:"/",class:"p-2"},{default:i(()=>[a("隱私權條款")]),_:1})])])])])}const $=v(R,[["render",I]]);export{$ as default};
