import{_ as l,m as d,g as u,c as i,a as s,t as h,y as m,z as p,F as f,i as _,o as n}from"./index-woH4x7mR.js";import{S as a}from"./sweetalert2.all-VcjyylQf.js";import{u as g}from"./user-OY70hAFy.js";import{_ as v}from"./footerContainer-TBENB7Dp.js";import"./helpers-Hx-ZzB2u.js";const $={name:"UserOrders",components:{},data(){return{title:"會員訂單",orderList:[],userId:0}},mounted(){const{userToken:t,userId:e}=this.getUserCookie();t&&e?(this.userId=e,this.getOrders()):this.$router.push("/login")},methods:{...d(g,["getUserCookie"]),getOrders(){if(!this.userId)return;const t=`http://localhost:3001/orders?userId=${this.userId}&_expand=user`;this.$http.get(t).then(e=>{console.log("getOrders",e.data),this.orderList=e.data}).catch(e=>{console.log(e.response)})},removeFavorite(t){!this.userId||!(t!=null&&t.id)||a.fire({title:"確認移除收藏嗎?",text:`商品: ${t.product.chineseName}`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"確定",cancelButtonText:"取消"}).then(e=>{e.isConfirmed&&u.delete(`http://localhost:3001/favorite/${t.id}`).then(o=>{this.getFavoriteList(),this.resetUserFavorites(),a.fire({title:"刪除成功",text:"",icon:"success"})}).catch(o=>{console.log(o.response),a.fire({title:"收藏失敗",text:"",icon:"error"})})})}}},w={class:"container mb-5"},x={class:"row"},B={class:"d-flex justify-content-between align-items-end mt-3"},F={class:"mt-5 mb-1 fs-3 font-weight-normal fw-bold"},I=s("option",{value:"1"},"依價格排序 ⬆",-1),k=s("option",{value:"2"},"依價格排序 ⬇",-1),C=[I,k],S=s("img",{src:v,class:"w-100 my-5"},null,-1);function U(t,e,o,b,c,y){return n(),i("div",w,[s("div",x,[s("div",B,[s("h2",F,"會員 / "+h(c.title),1),m(s("select",{class:"filter-sort","onUpdate:modelValue":e[0]||(e[0]=r=>t.sortFilter=r)},C,512),[[p,t.sortFilter]])]),S,(n(!0),i(f,null,_(t.getSortList,r=>(n(),i("div",{class:"col-md-3 mt-3",key:r.id}," Table "))),128))])])}const V=l($,[["render",U]]);export{V as default};
