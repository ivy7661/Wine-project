import{S as i}from"./sweetalert2.all-H_njJDCi.js";import{a as p}from"./helpers-F0ufIW4w.js";import{_ as u,c as f,a as t,t as _,E as h,i as l,G as d,b as w,w as b,h as c,r as x,o as D}from"./index-ZKoMPaXE.js";var g={BASE_URL:"/undefined/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const v={name:"AdminLogin",components:{},data(){return{title:"管理者登入頁",userData:{email:"",password:""}}},methods:{login(){const n=`${g.VITE_API_URL}/login`;this.$http.post(n,this.userData).then(e=>{if(e.data.accessToken&&e.data.user.role==="admin"){const o=p(new Date,2);document.cookie=`adminToken=${e.data.accessToken}; expires=${new Date(o)}; path=/`,document.cookie=`adminId=${e.data.user.id}; expires=${new Date(o)}; path=/`,this.$router.push("/admin/accounts"),i.fire({title:"登入成功",text:`管理員：${e.data.user.name}`,icon:"success"})}else i.fire({title:"登入失敗",text:"",icon:"error"})}).catch(e=>{var o;i.fire({title:((o=e.response)==null?void 0:o.data)||"登入失敗",text:"",icon:"error"}),this.isLoading=!1})}},mounted(){}},k={class:"row justify-content-center"},y={class:"mt-5 font-weight-normal fw-bold text-center"},L={class:"col-6 py-4"},S={class:"form-floating mb-3"},T=t("label",{for:"email"},"帳號",-1),V={class:"form-floating"},E=t("label",{for:"password"},"密碼",-1),R=t("button",{class:"btn btn-lg btn-primary w-100 mt-3",type:"submit"},"登入",-1),$=t("div",{class:"checkbox mb-3"},[t("label",null,[t("input",{type:"checkbox",value:"remember-me"}),c(" 記住我 ")])],-1),A={class:"text-center"};function B(n,e,o,U,s,r){const m=x("RouterLink");return D(),f("div",k,[t("h2",y,_(s.title),1),t("div",L,[t("form",{id:"form",class:"form-signin",onSubmit:e[2]||(e[2]=h((...a)=>r.login&&r.login(...a),["prevent"]))},[t("div",S,[l(t("input",{type:"email",class:"form-control",id:"email",placeholder:"name@example.com",required:"",autofocus:"","onUpdate:modelValue":e[0]||(e[0]=a=>s.userData.email=a)},null,512),[[d,s.userData.email]]),T]),t("div",V,[l(t("input",{type:"password",class:"form-control",id:"password",placeholder:"Password",autocomplete:"false",required:"","onUpdate:modelValue":e[1]||(e[1]=a=>s.userData.password=a)},null,512),[[d,s.userData.password]]),E]),R,$,t("div",A,[w(m,{to:"/",class:"p-2"},{default:b(()=>[c("回到首頁")]),_:1})])],32)])])}const P=u(v,[["render",B]]);export{P as default};
