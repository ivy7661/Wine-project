import{S as w}from"./sweetalert2.all-BrsHtOoB.js";import{_ as V,m as g,c as v,a as e,t as k,d as p,b as s,w as h,r as u,o as x,x as c}from"./index-Yx8QcuVY.js";import{u as P}from"./user-gXHQ1MQ6.js";import{u as y,p as R}from"./regex-pcAWi6j3.js";import"./helpers-Hx-ZzB2u.js";const U={name:"RegisterView",components:{},data(){return{title:"立即註冊",form:{user:{email:"",username:"",phone:"",password:"",checkPwd:""},message:""}}},methods:{...g(P,["setUser","setUserCookie"]),register(){const l="https://wine-project-tmiy.onrender.com/register1",o={email:this.form.user.email,username:this.form.user.username,phone:this.form.user.phone,password:this.form.user.password,role:"user"};this.$http.post(l,o).then(a=>{this.setUserCookie(a.data.user.id,a.data.accessToken),this.setUser(a.data.user),w.fire({title:"註冊成功",text:`歡迎 ${a.data.user.username} 加入 Vin Chateau 會員`,icon:"success"}),this.$router.push("/")}).catch(a=>{var f;console.log(a),w.fire({title:((f=a.response)==null?void 0:f.data)||"註冊失敗",text:"",icon:"error"})})},checkPWDRule(l){return l===this.form.user.password?!0:"密碼不一致"},isPasswordRule(l){return y.test(l)?!0:"密碼長度為 6 ~ 12 碼，需包含英文及數字"},isPhoneRule(l){return R.test(l)?!0:"請輸入正確的電話號碼"}}},C={class:"container"},S={class:"row justify-content-center"},D={class:"fs-3 mt-5 font-weight-normal fw-bold text-center"},E={class:"fs-3 mt-0 mb-3 font-weight-normal fw-bold text-center"},F={class:"col-5 py-4"},N={class:"form-floating mb-3"},B=e("label",{for:"email"},"帳號",-1),j={class:"form-floating mb-3"},q=e("label",{for:"username"},"名稱",-1),L={class:"form-floating mb-3"},M=e("label",{for:"phone"},"電話",-1),T={class:"form-floating mb-3"},W=e("label",{for:"password"},"密碼",-1),z={class:"form-floating mb-3"},A=e("label",{for:"checkPwd"},"確認密碼",-1),G=e("button",{class:"btn btn-lg btn-primary w-100 mt-3",type:"submit"}," 註冊 ",-1),H={class:"text-center mt-3"};function I(l,o,a,f,t,d){const _=u("RouterLink"),n=u("VeeField"),i=u("ErrorMessage"),b=u("VeeForm");return x(),v("div",C,[e("div",S,[e("h2",D,k(t.title),1),e("h2",E,[p(" 已經擁有 Vin Chateau 帳號嗎?"),s(_,{to:"/login",class:"p-2"},{default:h(()=>[p("立即登入")]),_:1})]),e("div",F,[s(b,{ref:"register-form",class:"form-signin",onSubmit:d.register},{default:h(({errors:m})=>[e("div",N,[s(n,{id:"email",name:"帳號",type:"email",class:c(["form-control",{"is-invalid":m.帳號}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:t.form.user.email,"onUpdate:modelValue":o[0]||(o[0]=r=>t.form.user.email=r),autofocus:""},null,8,["class","modelValue"]),B,s(i,{name:"帳號",class:"invalid-feedback"})]),e("div",j,[s(n,{id:"username",name:"名稱",type:"text",class:c(["form-control",{"is-invalid":m.名稱}]),placeholder:"請輸入名稱",rules:"required|min:2|max:10",modelValue:t.form.user.username,"onUpdate:modelValue":o[1]||(o[1]=r=>t.form.user.username=r)},null,8,["class","modelValue"]),q,s(i,{name:"名稱",class:"invalid-feedback"})]),e("div",L,[s(n,{id:"phone",name:"電話",type:"text",class:c(["form-control",{"is-invalid":m.電話}]),placeholder:"請輸入電話",rules:d.isPhoneRule,modelValue:t.form.user.phone,"onUpdate:modelValue":o[2]||(o[2]=r=>t.form.user.phone=r)},null,8,["class","rules","modelValue"]),M,s(i,{name:"電話",class:"invalid-feedback"})]),e("div",T,[s(n,{id:"password",name:"密碼",type:"password",class:c(["form-control",{"is-invalid":m.密碼}]),placeholder:"請輸入密碼",autocomplete:"false",rules:d.isPasswordRule,modelValue:t.form.user.password,"onUpdate:modelValue":o[3]||(o[3]=r=>t.form.user.password=r)},null,8,["class","rules","modelValue"]),W,s(i,{name:"密碼",class:"invalid-feedback"})]),e("div",z,[s(n,{id:"checkPwd",name:"確認密碼",type:"password",class:c(["form-control",{"is-invalid":m.確認密碼}]),placeholder:"Password",autocomplete:"false",rules:d.checkPWDRule,modelValue:t.form.user.checkPwd,"onUpdate:modelValue":o[4]||(o[4]=r=>t.form.user.checkPwd=r)},null,8,["class","rules","modelValue"]),A,s(i,{name:"確認密碼",class:"invalid-feedback"})]),G,e("div",H,[s(_,{to:"/",class:"p-2"},{default:h(()=>[p("回首頁")]),_:1})])]),_:1},8,["onSubmit"])])])])}const Y=V(U,[["render",I]]);export{Y as default};
