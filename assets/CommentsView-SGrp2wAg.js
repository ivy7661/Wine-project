import{_ as h,o as i,c,a as t,i as r,G as _,h as p,t as a,f as b,F as C,J as D,b as f,r as M,p as x,d as g}from"./index-ZoMiIMOt.js";import{M as I}from"./bootstrap.esm-TTjMTX3M.js";const w={props:["tempComment"],data(){return{modalComment:null,editComment:{}}},methods:{openModal(){this.modalComment.show()},closeModal(){this.modalComment.hide()}},mounted(){this.modalComment=new I(this.$refs.commentModal)},watch:{tempComment(){this.editComment=this.tempComment}}},V={id:"commentModal",ref:"commentModal",class:"modal fade",tabindex:"-1","aria-labelledby":"commentModalLabel","aria-hidden":"true"},k={class:"modal-dialog modal-xl"},E={class:"modal-content border-0"},L=t("div",{class:"modal-header bg-dark text-white"},[t("h5",{id:"commentModalLabel",class:"modal-title"},[t("span",null,"用戶評論")]),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),S={class:"modal-body"},U={class:"row"},A={class:"row"},R={class:"mb-3 col-md-2"},T=t("label",{for:"commentId",class:"form-label"},"評論ID",-1),B={class:"mb-3 col-md-2"},N=t("label",{for:"userId",class:"form-label"},"使用者ID",-1),P={class:"mb-3 col-md-2"},F=t("label",{for:"productId",class:"form-label"},"產品ID",-1),O={class:"mb-3"},j=t("label",{for:"comment",class:"form-label"},"評論內容",-1),G=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 關閉 ")],-1);function J(s,e,d,u,o,m){return i(),c("div",V,[t("div",k,[t("div",E,[L,t("div",S,[t("div",U,[t("div",null,[t("div",A,[t("div",R,[T,r(t("input",{id:"commentId","onUpdate:modelValue":e[0]||(e[0]=l=>o.editComment.id=l),type:"text",class:"form-control",readonly:""},null,512),[[_,o.editComment.id]])]),t("div",B,[N,r(t("input",{id:"userId","onUpdate:modelValue":e[1]||(e[1]=l=>o.editComment.userId=l),type:"text",class:"form-control",readonly:""},null,512),[[_,o.editComment.userId]])]),t("div",P,[F,r(t("input",{id:"productId","onUpdate:modelValue":e[2]||(e[2]=l=>o.editComment.productId=l),type:"text",class:"form-control",readonly:""},null,512),[[_,o.editComment.productId]])])]),t("div",O,[j,r(t("textarea",{id:"comment","onUpdate:modelValue":e[3]||(e[3]=l=>o.editComment.comment=l),type:"text",class:"form-control",style:{height:"200px"},readonly:""},null,512),[[_,o.editComment.comment]])])])])]),G])])],512)}const W=h(w,[["render",J]]),q={props:["tempComment","delComment"],data(){return{ModalCommentDel:null}},methods:{openDelModal(){this.ModalCommentDel.show()},closeDelModal(){this.ModalCommentDel.hide()}},mounted(){this.ModalCommentDel=new I(this.$refs.delCommentModal)}},z={id:"delCommentModal",ref:"delCommentModal",class:"modal fade",tabindex:"-1","aria-labelledby":"delCommentModalLabel","aria-hidden":"true"},H={class:"modal-dialog"},K={class:"modal-content border-0"},Q=t("div",{class:"modal-header bg-danger text-white"},[t("h5",{id:"delCommentModalLabel",class:"modal-title"},[t("span",null,"刪除產品")]),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),X={class:"modal-body"},Y={class:"text-danger"},Z={class:"modal-footer"},tt=t("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function et(s,e,d,u,o,m){return i(),c("div",z,[t("div",H,[t("div",K,[Q,t("div",X,[p(" 是否刪除ID "),t("strong",Y,a(d.tempComment.id),1),p(" 評論(刪除後將無法恢復)。 ")]),t("div",Z,[tt,t("button",{type:"button",class:"btn btn-danger",onClick:e[0]||(e[0]=(...l)=>d.delComment&&d.delComment(...l))},"確認刪除")])])])],512)}const ot=h(q,[["render",et]]);var st={VITE_API_URL:"http://localhost:3001",VITE_API_NAME:"",BASE_URL:"/Wine-project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API_URL:v}=st,lt={name:"AdminCommentsView",components:{CommentModal:W,DelCommentModal:ot},data(){return{title:"評論管理",comments:[],tempComment:{}}},mounted(){this.getComments()},methods:{getComments(){const s=`${v}/comments`;b.get(s).then(e=>{console.log(e),this.comments=e.data}).catch(()=>{alert("獲取評論失敗")})},openModal(s,e){s==="detail"?(this.tempComment={...e},this.$refs.commentModal.openModal()):s==="delete"&&(this.tempComment={...e},this.$refs.delCommentModal.openDelModal())},delComment(){const s=`${v}/comments/${this.tempComment.id}`;b.delete(s).then(e=>{alert("刪除成功"),this.$refs.delCommentModal.closeDelModal(),this.getComments()}).catch(()=>{alert("刪除失敗")})}}},nt=s=>(x("data-v-6f12a9e4"),s=s(),g(),s),dt={class:"row"},mt={class:"mt-3"},at={class:"table mt-4"},it=nt(()=>t("thead",null,[t("tr",null,[t("th",{width:"70"},"評論ID"),t("th",{width:"70"},"使用者ID"),t("th",{width:"120"},"評論內容"),t("th",{width:"120"},"詳細資訊"),t("th",{width:"120"},"刪除評論")])],-1)),ct={class:"commentContent"},rt={class:"btn-group"},_t=["onClick"],ht={class:"btn-group"},ut=["onClick"];function pt(s,e,d,u,o,m){const l=M("Comment-Modal"),y=M("Del-Comment-Modal");return i(),c(C,null,[t("div",dt,[t("h1",mt,a(o.title),1),t("table",at,[it,t("tbody",null,[(i(!0),c(C,null,D(o.comments,n=>(i(),c("tr",{key:n.id},[t("td",null,a(n.id),1),t("td",null,a(n.userId),1),t("td",null,[t("p",ct,a(n.comment),1)]),t("td",null,[t("div",rt,[t("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:$=>m.openModal("detail",n)}," 查看 ",8,_t)])]),t("td",null,[t("div",ht,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:$=>m.openModal("delete",n)}," 刪除 ",8,ut)])])]))),128))])])]),f(l,{"temp-comment":o.tempComment,ref:"commentModal"},null,8,["temp-comment"]),f(y,{"temp-comment":o.tempComment,"del-comment":m.delComment,ref:"delCommentModal"},null,8,["temp-comment","del-comment"])],64)}const ft=h(lt,[["render",pt],["__scopeId","data-v-6f12a9e4"]]);export{ft as default};
