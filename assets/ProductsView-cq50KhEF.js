import{_ as h,o as c,c as r,a as t,y as d,M as i,i as V,B as f,d as P,t as m,g as _,F as v,j as k,b as y,r as g,p as U,e as N}from"./index-Yx8QcuVY.js";import{M as w}from"./bootstrap.esm-uhsrVe-H.js";import{h as D}from"./header_line-iVAhfo8J.js";const C={props:["tempProduct","updateProduct","isNew"],data(){return{modalProduct:null,editProduct:{image:"",flavor:[],taste:{tannin:"",body:"",acidity:"",sweet:""}}}},methods:{openModal(){this.modalProduct.show()},closeModal(){this.modalProduct.hide()}},mounted(){this.modalProduct=new w(this.$refs.productModal)},watch:{tempProduct(){this.editProduct=this.tempProduct}}},S={id:"productModal",ref:"productModal",class:"modal fade",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true"},I={class:"modal-dialog modal-xl"},L={class:"modal-content border-0"},E={class:"modal-header bg-dark text-white"},R={id:"productModalLabel",class:"modal-title"},j={key:0},A={key:1},B=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),O={class:"modal-body"},T={class:"row"},F={class:"col-sm-4"},J={class:"mb-3"},W=t("label",{for:"image",class:"form-label"},"圖片",-1),q={key:0},z=["src"],G={class:"col-sm-8"},H={class:"mb-3"},K=t("label",{for:"title",class:"form-label"},"產品名稱",-1),Q={class:"mb-3"},X=t("label",{for:"engtitle",class:"form-label"},"英文名稱",-1),Y={class:"row"},Z={class:"mb-3 col-md-4"},$=t("label",{for:"category",class:"form-label"},"分類",-1),tt={class:"mb-3 col-md-4"},et=t("label",{for:"place",class:"form-label"},"產區",-1),ot={class:"mb-3 col-md-4"},st=t("label",{for:"price",class:"form-label"},"售價",-1),lt={class:"row"},dt={class:"mb-3 col-md-6"},it=t("label",{for:"village",class:"form-label"},"酒莊",-1),nt={class:"mb-3 col-md-6"},ct=t("label",{for:"grape",class:"form-label"},"葡萄品種",-1),rt=t("hr",null,null,-1),at={class:"row"},ut={class:"mb-3 col-md-4"},mt=t("label",{for:"flavor",class:"form-label"},"風味",-1),pt={class:"mb-3 col-md-8"},_t=t("label",{for:"food",class:"form-label"},"搭餐",-1),ht={class:"row mb-3"},bt={class:"col-md-3"},ft=t("label",{for:"tannin",class:"form-label"},"單寧",-1),Pt={class:"col-md-3"},vt=t("label",{for:"body",class:"form-label"},"酒體",-1),yt={class:"col-md-3"},gt=t("label",{for:"acidity",class:"form-label"},"酸度",-1),wt={class:"col-md-3"},Mt=t("label",{for:"sweet",class:"form-label"},"甜度",-1),xt={class:"row mb-3"},Vt={class:"col-md-3"},kt=t("label",{for:"num",class:"form-label"},"數量",-1),Ut={class:"col-md-3"},Nt=t("label",{for:"star",class:"form-label"},"評分",-1),Dt={class:"col-md-3 mt-5 mb-3"},Ct={class:"form-check"},St=t("label",{class:"form-check-label",for:"is_enabled"},"是否熱銷",-1),It={class:"col-md-3 mt-5 mb-3"},Lt={class:"form-check"},Et=t("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1),Rt={class:"modal-footer"},jt=t("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function At(l,e,n,b,o,a){return c(),r("div",S,[t("div",I,[t("div",L,[t("div",E,[t("h5",R,[n.isNew?(c(),r("span",j,"新增產品")):(c(),r("span",A,"編輯產品"))]),B]),t("div",O,[t("div",T,[t("div",F,[t("div",J,[W,d(t("input",{id:"image","onUpdate:modelValue":e[0]||(e[0]=s=>o.editProduct.image=s),type:"text",class:"form-control mb-2",placeholder:"請輸入圖片名稱"},null,512),[[i,o.editProduct.image]]),o.editProduct.image?(c(),r("div",q,[t("img",{class:"img-fluid",src:l.$filters.imgPath(`/images/wine_images/${o.editProduct.image}.jpg`)},null,8,z)])):V("",!0)])]),t("div",G,[t("div",H,[K,d(t("input",{id:"title","onUpdate:modelValue":e[1]||(e[1]=s=>o.editProduct.chineseName=s),type:"text",class:"form-control",placeholder:"請輸入產品名稱"},null,512),[[i,o.editProduct.chineseName]])]),t("div",Q,[X,d(t("input",{id:"engtitle","onUpdate:modelValue":e[2]||(e[2]=s=>o.editProduct.englishName=s),type:"text",class:"form-control",placeholder:"請輸入英文名稱"},null,512),[[i,o.editProduct.englishName]])]),t("div",Y,[t("div",Z,[$,d(t("input",{id:"category","onUpdate:modelValue":e[3]||(e[3]=s=>o.editProduct.wineStyle=s),type:"text",class:"form-control",placeholder:"請輸入分類"},null,512),[[i,o.editProduct.wineStyle]])]),t("div",tt,[et,d(t("input",{id:"place","onUpdate:modelValue":e[4]||(e[4]=s=>o.editProduct.place=s),type:"text",class:"form-control",placeholder:"請輸入產區"},null,512),[[i,o.editProduct.place]])]),t("div",ot,[st,d(t("input",{id:"price","onUpdate:modelValue":e[5]||(e[5]=s=>o.editProduct.price=s),type:"number",min:"0",class:"form-control",placeholder:"請輸入售價"},null,512),[[i,o.editProduct.price,void 0,{number:!0}]])])]),t("div",lt,[t("div",dt,[it,d(t("input",{id:"village","onUpdate:modelValue":e[6]||(e[6]=s=>o.editProduct.village=s),type:"text",class:"form-control",placeholder:"請輸入酒莊"},null,512),[[i,o.editProduct.village]])]),t("div",nt,[ct,d(t("input",{id:"grape","onUpdate:modelValue":e[7]||(e[7]=s=>o.editProduct.grape=s),class:"form-control",placeholder:"請輸入葡萄品種"},null,512),[[i,o.editProduct.grape]])])]),rt,t("div",at,[t("div",ut,[mt,d(t("input",{id:"flavor","onUpdate:modelValue":e[8]||(e[8]=s=>o.editProduct.flavor=s),type:"text",class:"form-control",placeholder:"請輸入風味"},null,512),[[i,o.editProduct.flavor]])]),t("div",pt,[_t,d(t("input",{id:"food","onUpdate:modelValue":e[9]||(e[9]=s=>o.editProduct.food=s),type:"text",class:"form-control",placeholder:"請輸入搭餐"},null,512),[[i,o.editProduct.food]])])]),t("div",ht,[t("div",bt,[ft,d(t("input",{id:"tannin","onUpdate:modelValue":e[10]||(e[10]=s=>o.editProduct.taste.tannin=s),type:"text",class:"form-control",placeholder:"請輸入單寧"},null,512),[[i,o.editProduct.taste.tannin]])]),t("div",Pt,[vt,d(t("input",{id:"body","onUpdate:modelValue":e[11]||(e[11]=s=>o.editProduct.taste.body=s),type:"text",class:"form-control",placeholder:"請輸入酒體"},null,512),[[i,o.editProduct.taste.body]])]),t("div",yt,[gt,d(t("input",{id:"acidity","onUpdate:modelValue":e[12]||(e[12]=s=>o.editProduct.taste.acidity=s),class:"form-control",placeholder:"請輸入酸度"},null,512),[[i,o.editProduct.taste.acidity]])]),t("div",wt,[Mt,d(t("input",{id:"sweet","onUpdate:modelValue":e[13]||(e[13]=s=>o.editProduct.taste.sweet=s),class:"form-control",placeholder:"請輸入甜度"},null,512),[[i,o.editProduct.taste.sweet]])])]),t("div",xt,[t("div",Vt,[kt,d(t("input",{id:"num","onUpdate:modelValue":e[14]||(e[14]=s=>o.editProduct.num=s),type:"number",min:"0",class:"form-control",placeholder:"請輸入數量"},null,512),[[i,o.editProduct.num,void 0,{number:!0}]])]),t("div",Ut,[Nt,d(t("input",{id:"star","onUpdate:modelValue":e[15]||(e[15]=s=>o.editProduct.star=s),type:"number",min:"1",max:"5",class:"form-control",placeholder:"請輸入評分"},null,512),[[i,o.editProduct.star,void 0,{number:!0}]])]),t("div",Dt,[t("div",Ct,[d(t("input",{id:"is_enabled","onUpdate:modelValue":e[16]||(e[16]=s=>o.editProduct.is_hot=s),class:"form-check-input",type:"checkbox","true-value":1,"false-value":0},null,512),[[f,o.editProduct.is_hot]]),St])]),t("div",It,[t("div",Lt,[d(t("input",{id:"is_enabled","onUpdate:modelValue":e[17]||(e[17]=s=>o.editProduct.is_enabled=s),class:"form-check-input",type:"checkbox","true-value":1,"false-value":0},null,512),[[f,o.editProduct.is_enabled]]),Et])])])])])]),t("div",Rt,[jt,t("button",{type:"button",class:"btn btn-primary",onClick:e[18]||(e[18]=(...s)=>n.updateProduct&&n.updateProduct(...s))},"確認")])])])],512)}const Bt=h(C,[["render",At]]),Ot={props:["tempProduct","delProduct"],data(){return{delModalProduct:null}},methods:{openDelModal(){this.delModalProduct.show()},closeDelModal(){this.delModalProduct.hide()}},mounted(){this.delModalProduct=new w(this.$refs.delProductModal)}},Tt={id:"delProductModal",ref:"delProductModal",class:"modal fade",tabindex:"-1","aria-labelledby":"delProductModalLabel","aria-hidden":"true"},Ft={class:"modal-dialog"},Jt={class:"modal-content border-0"},Wt=t("div",{class:"modal-header bg-danger text-white"},[t("h5",{id:"delProductModalLabel",class:"modal-title"},[t("span",null,"刪除產品")]),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),qt={class:"modal-body"},zt={class:"text-danger"},Gt={class:"modal-footer"},Ht=t("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function Kt(l,e,n,b,o,a){return c(),r("div",Tt,[t("div",Ft,[t("div",Jt,[Wt,t("div",qt,[P(" 是否刪除 "),t("strong",zt,m(n.tempProduct.chineseName),1),P(" 商品(刪除後將無法恢復)。 ")]),t("div",Gt,[Ht,t("button",{type:"button",class:"btn btn-danger",onClick:e[0]||(e[0]=(...s)=>n.delProduct&&n.delProduct(...s))},"確認刪除")])])])],512)}const Qt=h(Ot,[["render",Kt]]);var Xt={VITE_API_URL:"https://wine-project-tmiy.onrender.com",VITE_REPO_NAME:"Wine-project",BASE_URL:"/Wine-project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API_URL:p}=Xt,Yt={name:"AdminProductsView",components:{ProductModal:Bt,DelModal:Qt},data(){return{title:"商品管理",headerLine:D,products:[],tempProduct:{image:"",flavor:[],taste:{tannin:"",body:"",acidity:"",sweet:""}},pages:{},modalProduct:null,delModalProduct:null,isNew:!1,newProduct:{}}},mounted(){this.getData()},methods:{getData(){const l=`${p}/products`;_.get(l).then(e=>{console.log(e.data),this.products=e.data}).catch(()=>{alert("取得產品資訊失敗")})},updateProduct(){let l=`${p}/products`,e="post";this.isNew||(l=`${p}/products/${this.tempProduct.id}`,e="put"),this.newProduct=JSON.parse(JSON.stringify(this.tempProduct)),typeof this.newProduct.flavor=="string"&&(this.newProduct.flavor=this.newProduct.flavor.split(",")),typeof this.newProduct.food=="string"&&(this.newProduct.food=this.newProduct.food.split(",")),typeof this.newProduct.grape=="string"&&(this.newProduct.grape=this.newProduct.grape.split(",")),_[e](l,this.newProduct).then(n=>{alert("新增/修改成功"),this.getData(),this.$refs.pModal.closeModal()}).catch(()=>{alert("新增/修改失敗")})},openModal(l,e){l==="new"?(this.tempProduct={image:"",flavor:[],taste:{tannin:"",body:"",acidity:"",sweet:""}},this.isNew=!0,this.$refs.pModal.openModal()):l==="edit"?(this.tempProduct={...e},this.isNew=!1,this.$refs.pModal.openModal()):l==="delete"&&(this.tempProduct={...e},this.$refs.delModal.openDelModal())},delProduct(){const l=`${p}/products/${this.tempProduct.id}`;_.delete(l).then(e=>{alert("刪除成功"),this.$refs.delModal.closeDelModal(),this.getData()}).catch(()=>{alert("刪除失敗")})},createImages(){this.tempProduct.imagesUrl=[],this.tempProduct.imagesUrl.push("")}}},Zt=l=>(U("data-v-2569a696"),l=l(),N(),l),$t={class:"row"},te={class:"my-3"},ee={class:"header-line"},oe=["src"],se={class:"text-end mt-4"},le={class:"row"},de={class:"table mt-4 mx-2"},ie=Zt(()=>t("thead",{class:"table-light"},[t("tr",null,[t("th",{width:"120"},"分類"),t("th",{width:"300"},"產品名稱"),t("th",{width:"120"},"售價"),t("th",{width:"120",class:"text-center"},"編輯")])],-1)),ne={class:"text-center"},ce={class:"btn-group"},re=["onClick"],ae=["onClick"];function ue(l,e,n,b,o,a){const s=g("Product-Modal"),M=g("Del-Modal");return c(),r(v,null,[t("div",$t,[t("h1",te,m(o.title),1),t("div",ee,[t("img",{src:o.headerLine,alt:"header line"},null,8,oe)]),t("div",se,[t("button",{class:"btn btn-primary",onClick:e[0]||(e[0]=u=>a.openModal("new"))},"建立新的產品")]),t("div",le,[t("table",de,[ie,t("tbody",null,[(c(!0),r(v,null,k(o.products,u=>(c(),r("tr",{key:u.id},[t("td",null,m(u.wineStyle),1),t("td",null,m(u.chineseName),1),t("td",null,m(u.price),1),t("td",ne,[t("div",ce,[t("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:x=>a.openModal("edit",u)}," 編輯 ",8,re),t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:x=>a.openModal("delete",u)}," 刪除 ",8,ae)])])]))),128))])])])]),y(s,{"temp-product":o.tempProduct,"update-product":a.updateProduct,"is-New":o.isNew,ref:"pModal"},null,8,["temp-product","update-product","is-New"]),y(M,{"temp-product":o.tempProduct,"del-product":a.delProduct,ref:"delModal"},null,8,["temp-product","del-product"])],64)}const he=h(Yt,[["render",ue],["__scopeId","data-v-2569a696"]]);export{he as default};
