import{S as p}from"./sweetalert2.all-wKahP_yO.js";import{_ as w,m as v,c as g,a as e,b as t,w as r,d as a,r as c,o as V,x as h,y as x,B as y}from"./index-sfitrgSI.js";import{u as k}from"./user-PJ6juPEh.js";import{u as C}from"./regex-pcAWi6j3.js";import{v as R}from"./vertical_line-Y-FOFHHk.js";import"./helpers-Hx-ZzB2u.js";const L={name:"LoginView",components:{},data(){return{verticalLine:R,title:"登入頁",isLoading:!1,isRemember:!1,userData:{email:"",password:""}}},methods:{...v(k,["setUser","setUserCookie"]),login(){this.$http.post("https://wine-project-tmiy.onrender.com/login",this.userData).then(s=>{s.data.accessToken&&s.data.user.role==="user"?(this.setUserCookie(s.data.user.id,s.data.accessToken),this.setUser(s.data.user),this.$router.replace("/")):p.fire({title:"登入失敗",text:"",icon:"error"})}).catch(s=>{var d;console.log(s.response),p.fire({title:((d=s.response)==null?void 0:d.data)||"登入失敗",text:"",icon:"error"})})},onGAuth(){p.fire({title:"Google 登入",text:"即將開放...",icon:"info"})},isPasswordRule(m){return C.test(m)?!0:"密碼長度為 6 ~ 12 碼，需包含英文及數字"}}},D={class:"container"},U={class:"row justify-content-center"},G=e("h2",{class:"fs-3 mt-5 font-weight-normal fw-bold text-center"},"歡迎來到 Vin Chateau",-1),S=e("h2",{class:"fs-3 mt-0 mb-5 font-weight-normal fw-bold text-center"},"若要開始購物，請先登入",-1),A={class:"col-5 py-4"},B={class:"form-floating mb-3"},E=e("label",{for:"email"},"帳號",-1),F={class:"form-floating"},P=e("label",{for:"password"},"密碼",-1),j=e("button",{class:"btn btn-lg btn-primary w-100 mt-3",type:"submit"}," 登入 ",-1),M={class:"checkbox d-flex justify-content-between mt-2 mb-3"},N={for:"isRemember"},T={class:"text-center"},q={class:"col-2 text-center"},z=["src"],H={class:"col-5 py-4"},I={class:"text-center mt-3"},J=e("p",{class:"m-0"},"當您使用 Vin Chateau 購物",-1);function K(m,s,d,O,o,l){const f=c("VeeField"),_=c("ErrorMessage"),u=c("RouterLink"),b=c("VeeForm");return V(),g("div",D,[e("div",U,[G,S,e("div",A,[t(b,{ref:"form-login",class:"form-signin",onSubmit:l.login},{default:r(({errors:n})=>[e("div",B,[t(f,{id:"email",type:"email",name:"帳號",class:h(["form-control",{"is-invalid":n.帳號}]),placeholder:"請輸入 Email",rules:"email|required",autofocus:"",modelValue:o.userData.email,"onUpdate:modelValue":s[0]||(s[0]=i=>o.userData.email=i)},null,8,["class","modelValue"]),E,t(_,{name:"帳號",class:"invalid-feedback"})]),e("div",F,[t(f,{id:"password",name:"密碼",type:"password",class:h(["form-control",{"is-invalid":n.密碼}]),placeholder:"請輸入密碼",autocomplete:"false",rules:l.isPasswordRule,modelValue:o.userData.password,"onUpdate:modelValue":s[1]||(s[1]=i=>o.userData.password=i)},null,8,["class","rules","modelValue"]),P,t(_,{name:"密碼",class:"invalid-feedback"})]),j,e("div",M,[e("label",N,[x(e("input",{id:"isRemember",type:"checkbox",value:"false","onUpdate:modelValue":s[2]||(s[2]=i=>o.isRemember=i)},null,512),[[y,o.isRemember]]),a(" 記住我 ")]),t(u,{to:"/forgot",class:"float-end"},{default:r(()=>[a("忘記密碼")]),_:1})]),e("div",T,[a(" 還不是會員嗎?  "),t(u,{to:"/register",class:"p-2"},{default:r(()=>[a("立即註冊新帳號")]),_:1})])]),_:1},8,["onSubmit"])]),e("div",q,[e("img",{src:o.verticalLine,alt:"vertical Line"},null,8,z)]),e("div",H,[e("button",{class:"btn btn-lg btn-primary w-100 mt-3",type:"submit",onClick:s[3]||(s[3]=(...n)=>l.onGAuth&&l.onGAuth(...n))}," 使用 Google 快速登入 "),e("div",I,[J,e("p",null,[a("代表您同意 Vin Chateau "),t(u,{to:"/privacyPolicy",class:"p-2"},{default:r(()=>[a("隱私權條款")]),_:1})])])])])])}const ee=w(L,[["render",K]]);export{ee as default};
