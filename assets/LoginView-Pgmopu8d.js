import{S as f}from"./sweetalert2.all-S7yvzzrE.js";import{_ as v,m as g,c as w,a as e,b as t,w as n,h as a,r,o as V,n as h,i as x,v as k}from"./index-FgGFTrBt.js";import{u as R}from"./user-1LTUej1S.js";import{u as y}from"./regex-pcAWi6j3.js";import"./helpers-F0ufIW4w.js";const D="/undefined/assets/vertical_line-x0c1p0FO.svg";var L={BASE_URL:"/undefined/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const C={name:"LoginView",components:{},data(){return{verticalLine:D,title:"登入頁",isLoading:!1,isRemember:!1,userData:{email:"",password:""}}},methods:{...g(R,["setUser","setUserCookie"]),login(){const l=`${L.VITE_API_URL}/login`;this.$http.post(l,this.userData).then(s=>{s.data.accessToken&&s.data.user.role==="user"?(this.setUserCookie(s.data.user.id,s.data.accessToken),this.setUser(s.data.user),this.$router.replace("/")):f.fire({title:"登入失敗",text:"",icon:"error"})}).catch(s=>{var c;console.log(s.response),f.fire({title:((c=s.response)==null?void 0:c.data)||"登入失敗",text:"",icon:"error"})})},isPasswordRule(l){return y.test(l)?!0:"密碼長度為 6 ~ 12 碼，需包含英文及數字"}}},U={class:"row justify-content-center"},E=e("h2",{class:"mt-5 font-weight-normal fw-bold text-center"},"歡迎來到 Vin Chateau",-1),S=e("h2",{class:"mt-0 mb-5 font-weight-normal fw-bold text-center"},"若要開始購物，請先登入",-1),F={class:"col-5 py-4"},P={class:"form-floating mb-3"},B=e("label",{for:"email"},"帳號",-1),M={class:"form-floating"},T=e("label",{for:"password"},"密碼",-1),A=e("button",{class:"btn btn-lg btn-primary w-100 mt-3",type:"submit"}," 登入 ",-1),N={class:"checkbox mb-3"},O={for:"isRemember"},I={class:"text-center"},j={class:"col-2 text-center"},q=["src"],z={class:"col-5 py-4"},G=e("button",{class:"btn btn-lg btn-primary w-100 mt-3",type:"submit"}," 使用 Google 快速登入 ",-1),H={class:"text-center mt-3"},J=e("p",{class:"m-0"},"當您使用 Vin Chateau 購物",-1);function K(l,s,c,Q,o,m){const u=r("VeeField"),_=r("ErrorMessage"),d=r("RouterLink"),b=r("VeeForm");return V(),w("div",U,[E,S,e("div",F,[t(b,{ref:"form-login",class:"form-signin",onSubmit:m.login},{default:n(({errors:p})=>[e("div",P,[t(u,{id:"email",type:"email",name:"帳號",class:h(["form-control",{"is-invalid":p.帳號}]),placeholder:"請輸入 Email",rules:"email|required",autofocus:"",modelValue:o.userData.email,"onUpdate:modelValue":s[0]||(s[0]=i=>o.userData.email=i)},null,8,["class","modelValue"]),B,t(_,{name:"帳號",class:"invalid-feedback"})]),e("div",M,[t(u,{id:"password",name:"密碼",type:"password",class:h(["form-control",{"is-invalid":p.密碼}]),placeholder:"請輸入密碼",autocomplete:"false",rules:m.isPasswordRule,modelValue:o.userData.password,"onUpdate:modelValue":s[1]||(s[1]=i=>o.userData.password=i)},null,8,["class","rules","modelValue"]),T,t(_,{name:"密碼",class:"invalid-feedback"})]),A,e("div",N,[e("label",O,[x(e("input",{id:"isRemember",type:"checkbox",value:"false","onUpdate:modelValue":s[2]||(s[2]=i=>o.isRemember=i)},null,512),[[k,o.isRemember]]),a(" 記住我 ")]),t(d,{to:"/forgot",class:"p-2 float-end"},{default:n(()=>[a("忘記密碼")]),_:1})]),e("div",I,[a(" 還不是會員嗎?  "),t(d,{to:"/register",class:"p-2"},{default:n(()=>[a("立即註冊新帳號")]),_:1})])]),_:1},8,["onSubmit"])]),e("div",j,[e("img",{src:o.verticalLine,alt:"vertical Line"},null,8,q)]),e("div",z,[G,e("div",H,[J,e("p",null,[a("代表您同意 Vin Chateau "),t(d,{to:"/",class:"p-2"},{default:n(()=>[a("隱私權條款")]),_:1})])])])])}const ee=v(C,[["render",K]]);export{ee as default};
