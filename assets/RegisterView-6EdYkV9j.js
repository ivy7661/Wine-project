import{S as w}from"./sweetalert2.all-H_njJDCi.js";import{_ as b,m as g,c as v,a as e,t as k,h as p,b as s,w as h,r as c,o as P,n as d}from"./index-ZKoMPaXE.js";import{u as R}from"./user-nuLviec-.js";import{u as x,p as U}from"./regex-pcAWi6j3.js";import"./helpers-F0ufIW4w.js";var y={BASE_URL:"/undefined/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const S={name:"RegisterView",components:{},data(){return{title:"立即註冊",form:{user:{email:"",username:"",phone:"",password:"",checkPwd:""},message:""}}},methods:{...g(R,["setUser","setUserCookie"]),register(){const r=`${y.VITE_API_URL}/register1`,o={email:this.form.user.email,username:this.form.user.username,phone:this.form.user.phone,password:this.form.user.password,role:"user"};this.$http.post(r,o).then(a=>{this.setUserCookie(a.data.user.id,a.data.accessToken),this.setUser(a.data.user),w.fire({title:"註冊成功",text:`歡迎 ${a.data.user.username} 加入 Vin Chateau 會員`,icon:"success"}),this.$router.push("/")}).catch(a=>{var f;console.log(a),w.fire({title:((f=a.response)==null?void 0:f.data)||"註冊失敗",text:"",icon:"error"})})},checkPWDRule(r){return r===this.form.user.password?!0:"密碼不一致"},isPasswordRule(r){return x.test(r)?!0:"密碼長度為 6 ~ 12 碼，需包含英文及數字"},isPhoneRule(r){return U.test(r)?!0:"請輸入正確的電話號碼"}}},E={class:"row justify-content-center"},C={class:"mt-5 font-weight-normal fw-bold text-center"},D={class:"mt-0 mb-5 font-weight-normal fw-bold text-center"},B={class:"col-5 py-4"},F={class:"form-floating mb-3"},L=e("label",{for:"email"},"帳號",-1),N={class:"form-floating mb-3"},A=e("label",{for:"username"},"名稱",-1),M={class:"form-floating mb-3"},T=e("label",{for:"phone"},"電話",-1),q={class:"form-floating mb-3"},I=e("label",{for:"password"},"密碼",-1),O={class:"form-floating mb-3"},W=e("label",{for:"checkPwd"},"確認密碼",-1),j=e("button",{class:"btn btn-lg btn-primary w-100 mt-3",type:"submit"}," 註冊 ",-1),z={class:"text-center mt-3"};function G(r,o,a,f,t,u){const _=c("RouterLink"),n=c("VeeField"),i=c("ErrorMessage"),V=c("VeeForm");return P(),v("div",E,[e("h2",C,k(t.title),1),e("h2",D,[p(" 已經擁有 Vin Chateau 帳號嗎?"),s(_,{to:"/login",class:"p-2"},{default:h(()=>[p("立即登入")]),_:1})]),e("div",B,[s(V,{ref:"register-form",class:"form-signin",onSubmit:u.register},{default:h(({errors:m})=>[e("div",F,[s(n,{id:"email",name:"帳號",type:"email",class:d(["form-control",{"is-invalid":m.帳號}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:t.form.user.email,"onUpdate:modelValue":o[0]||(o[0]=l=>t.form.user.email=l),autofocus:""},null,8,["class","modelValue"]),L,s(i,{name:"帳號",class:"invalid-feedback"})]),e("div",N,[s(n,{id:"username",name:"名稱",type:"text",class:d(["form-control",{"is-invalid":m.名稱}]),placeholder:"請輸入名稱",rules:"required|min:2|max:10",modelValue:t.form.user.username,"onUpdate:modelValue":o[1]||(o[1]=l=>t.form.user.username=l)},null,8,["class","modelValue"]),A,s(i,{name:"名稱",class:"invalid-feedback"})]),e("div",M,[s(n,{id:"phone",name:"電話",type:"text",class:d(["form-control",{"is-invalid":m.電話}]),placeholder:"請輸入電話",rules:u.isPhoneRule,modelValue:t.form.user.phone,"onUpdate:modelValue":o[2]||(o[2]=l=>t.form.user.phone=l)},null,8,["class","rules","modelValue"]),T,s(i,{name:"電話",class:"invalid-feedback"})]),e("div",q,[s(n,{id:"password",name:"密碼",type:"password",class:d(["form-control",{"is-invalid":m.密碼}]),placeholder:"請輸入密碼",autocomplete:"false",rules:u.isPasswordRule,modelValue:t.form.user.password,"onUpdate:modelValue":o[3]||(o[3]=l=>t.form.user.password=l)},null,8,["class","rules","modelValue"]),I,s(i,{name:"密碼",class:"invalid-feedback"})]),e("div",O,[s(n,{id:"checkPwd",name:"確認密碼",type:"password",class:d(["form-control",{"is-invalid":m.確認密碼}]),placeholder:"Password",autocomplete:"false",rules:u.checkPWDRule,modelValue:t.form.user.checkPwd,"onUpdate:modelValue":o[4]||(o[4]=l=>t.form.user.checkPwd=l)},null,8,["class","rules","modelValue"]),W,s(i,{name:"確認密碼",class:"invalid-feedback"})]),j,e("div",z,[s(_,{to:"/",class:"p-2"},{default:h(()=>[p("回首頁")]),_:1})])]),_:1},8,["onSubmit"])])])}const Y=b(S,[["render",G]]);export{Y as default};
