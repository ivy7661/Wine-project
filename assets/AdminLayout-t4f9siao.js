import{_ as u,h,c as p,a as o,b as s,w as a,r as d,o as f,d as i,p as v,f as k}from"./index-ln-Pv9Z8.js";import{S as c}from"./sweetalert2.all-XoCN0Ps3.js";import{_ as g}from"./Logo-PzWtV9KY.js";const $={mounted(){const t=document.cookie.replace(/(?:(?:^|.*;\s*)adminToken\s*=\s*([^;]*).*$)|^.*$/,"$1"),n=document.cookie.replace(/(?:(?:^|.*;\s*)adminId\s*=\s*([^;]*).*$)|^.*$/,"$1");!t||!n?(this.logout(),c.fire({title:"無授權，請登入",icon:"error"})):(h.defaults.headers.common.Authorization=`Bearer ${t}`,this.adminCheck(n))},methods:{adminCheck(t){const n=`https://wine-project-tmiy.onrender.com/600/users/${t}`;this.$http.get(n).then(l=>{l.data.role!=="admin"&&(this.logout(),c.fire({title:"無授權，請登入",icon:"error"}))}).catch(()=>{this.logout()})},logout(){document.cookie=`adminToken=0; expires=${new Date("2000/1/1 12:00")}; path=/`,document.cookie=`adminId=0; expires=${new Date("2000/1/1 12:00")}; path=/`,this.$router.push("/adminLogin")},adminLogout(){this.logout(),c.fire({title:"登出成功",icon:"success"})}}},r=t=>(v("data-v-cb60b0c4"),t=t(),k(),t),x={class:"container-fluid"},w={class:"row vh-100"},b={class:"col-2 bg-accent-brown pt-5"},C=r(()=>o("div",{class:"text-center"},[o("img",{src:g,alt:"logo",class:"img-fluid mb-6 px-2 logo"})],-1)),I={class:"nav flex-column px-2"},L={class:"nav-item"},S={class:"nav-item"},V={class:"nav-item"},B={class:"nav-item"},R={class:"nav-item"},T={class:"nav-item"},y={class:"nav-item mt-5"},N=r(()=>o("span",{class:"material-icons"}," logout ",-1)),A={class:"col-10 py-5"},D={class:"container"};function j(t,n,l,z,E,m){const e=d("RouterLink"),_=d("RouterView");return f(),p("div",x,[o("div",w,[o("div",b,[C,o("ul",I,[o("li",L,[s(e,{to:"/admin/accounts",class:"nav-link"},{default:a(()=>[i("帳戶管理")]),_:1})]),o("li",S,[s(e,{to:"/admin/products",class:"nav-link"},{default:a(()=>[i("商品管理")]),_:1})]),o("li",V,[s(e,{to:"/admin/orders",class:"nav-link"},{default:a(()=>[i("訂單管理")]),_:1})]),o("li",B,[s(e,{to:"/admin/comments",class:"nav-link"},{default:a(()=>[i("評論管理")]),_:1})]),o("li",R,[s(e,{to:"/admin/sales",class:"nav-link"},{default:a(()=>[i("銷售數據")]),_:1})]),o("li",T,[s(e,{to:"/",class:"nav-link"},{default:a(()=>[i("回前台首頁")]),_:1})]),o("li",y,[s(e,{to:"/adminLogin",class:"nav-link d-flex align-items-center",onClick:m.adminLogout},{default:a(()=>[N,i("登出")]),_:1},8,["onClick"])])])]),o("div",A,[o("div",D,[s(_)])])])])}const H=u($,[["render",j],["__scopeId","data-v-cb60b0c4"]]);export{H as default};
