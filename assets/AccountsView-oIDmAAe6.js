import{_ as b,o as a,c,a as t,h as u,t as l,f as _,F as h,J as M,b as f,r as A}from"./index-ZKoMPaXE.js";import{M as g}from"./bootstrap.esm-TTjMTX3M.js";const $={props:["tempUser","delUser"],data(){return{delModalAccount:null}},methods:{openDelModal(){this.delModalAccount.show()},closeDelModal(){this.delModalAccount.hide()}},mounted(){this.delModalAccount=new g(this.$refs.delAccountModal)}},U={id:"delAccountModal",ref:"delAccountModal",class:"modal fade",tabindex:"-1","aria-labelledby":"delAccountModalLabel","aria-hidden":"true"},v={class:"modal-dialog"},D={class:"modal-content border-0"},w=t("div",{class:"modal-header bg-danger text-white"},[t("h5",{id:"delAccountModalLabel",class:"modal-title"},[t("span",null,"刪除帳戶")]),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),y={class:"modal-body"},x={class:"text-danger"},V={class:"modal-footer"},k=t("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function C(e,s,n,p,d,r){return a(),c("div",U,[t("div",v,[t("div",D,[w,t("div",y,[u(" 是否刪除 "),t("strong",x,l(n.tempUser.name),1),u(" 帳戶(刪除後將無法恢復)。 ")]),t("div",V,[k,t("button",{type:"button",class:"btn btn-danger",onClick:s[0]||(s[0]=(...i)=>n.delUser&&n.delUser(...i))},"確認刪除")])])])],512)}const E=b($,[["render",C]]);var L={BASE_URL:"/undefined/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API_URL:m}=L,B={name:"AdminAccountsView",components:{DelAccountModal:E},data(){return{title:"帳戶管理",users:[],tempUser:{}}},mounted(){this.getAccounts()},methods:{getAccounts(){const e=`${m}/users`;_.get(e).then(s=>{console.log(s.data),this.users=s.data}).catch(()=>{alert("取得帳戶資訊失敗")})},delUser(){const e=`${m}/users/${this.tempUser.id}`;_.delete(e).then(s=>{alert("刪除成功"),this.$refs.delModal.closeDelModal(),this.getAccounts()}).catch(()=>{alert("刪除失敗")})},openModal(e){this.tempUser={...e},this.$refs.delModal.openDelModal()}}},R={class:"row"},S={class:"mt-3"},N={class:"table mt-4"},F=t("thead",null,[t("tr",null,[t("th",{width:"120"},"身分"),t("th",{width:"120"},"名稱"),t("th",{width:"120"},"電子信箱"),t("th",{width:"120"},"刪除帳戶")])],-1),I={class:"btn-group"},O=["onClick"];function P(e,s,n,p,d,r){const i=A("Del-Account-Modal");return a(),c(h,null,[t("div",R,[t("h1",S,l(d.title),1),t("table",N,[F,t("tbody",null,[(a(!0),c(h,null,M(d.users,o=>(a(),c("tr",{key:o.id},[t("td",null,l(o.role),1),t("td",null,l(o.name),1),t("td",null,l(o.email),1),t("td",null,[t("div",I,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:T=>r.openModal(o)}," 刪除 ",8,O)])])]))),128))])])]),f(i,{"temp-user":d.tempUser,"del-user":r.delUser,ref:"delModal"},null,8,["temp-user","del-user"])],64)}const q=b(B,[["render",P]]);export{q as default};
