import{_ as h,o as a,c as u,a as t,i as s,G as d,v as f,h as P,t as m,f as _,F as v,J as V,b as y,r as g}from"./index-FgGFTrBt.js";import{M as w}from"./bootstrap.esm-TTjMTX3M.js";const k={props:["tempProduct","updateProduct","isNew"],data(){return{modalProduct:null,editProduct:{image:"",flavor:[],taste:{tannin:"",body:"",acidity:"",sweet:""}}}},methods:{openModal(){this.modalProduct.show()},closeModal(){this.modalProduct.hide()}},mounted(){this.modalProduct=new w(this.$refs.productModal)},watch:{tempProduct(){this.editProduct=this.tempProduct}}},U={id:"productModal",ref:"productModal",class:"modal fade",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true"},N={class:"modal-dialog modal-xl"},D={class:"modal-content border-0"},C={class:"modal-header bg-dark text-white"},S={id:"productModalLabel",class:"modal-title"},L={key:0},E={key:1},B=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),O={class:"modal-body"},R={class:"row"},A={class:"col-sm-4"},I={class:"mb-3"},J=t("label",{for:"image",class:"form-label"},"主要圖片",-1),T=["src"],F={class:"col-sm-8"},G={class:"mb-3"},j=t("label",{for:"title",class:"form-label"},"產品名稱",-1),q={class:"mb-3"},z=t("label",{for:"engtitle",class:"form-label"},"英文名稱",-1),H={class:"row"},K={class:"mb-3 col-md-4"},Q=t("label",{for:"category",class:"form-label"},"分類",-1),W={class:"mb-3 col-md-4"},X=t("label",{for:"place",class:"form-label"},"產區",-1),Y={class:"mb-3 col-md-4"},Z=t("label",{for:"price",class:"form-label"},"售價",-1),$={class:"row"},tt={class:"mb-3 col-md-6"},ot=t("label",{for:"village",class:"form-label"},"酒莊",-1),et={class:"mb-3 col-md-6"},lt=t("label",{for:"grape",class:"form-label"},"葡萄品種",-1),st=t("hr",null,null,-1),dt={class:"row"},it={class:"mb-3 col-md-4"},nt=t("label",{for:"flavor",class:"form-label"},"風味",-1),rt={class:"mb-3 col-md-8"},ct=t("label",{for:"food",class:"form-label"},"搭餐",-1),at={class:"row mb-3"},ut={class:"col-md-3"},mt=t("label",{for:"tannin",class:"form-label"},"單寧",-1),pt={class:"col-md-3"},_t=t("label",{for:"body",class:"form-label"},"酒體",-1),ht={class:"col-md-3"},bt=t("label",{for:"acidity",class:"form-label"},"酸度",-1),ft={class:"col-md-3"},Pt=t("label",{for:"sweet",class:"form-label"},"甜度",-1),vt={class:"row mb-3"},yt={class:"col-md-3"},gt=t("label",{for:"num",class:"form-label"},"數量",-1),wt={class:"col-md-3"},Mt=t("label",{for:"star",class:"form-label"},"評分",-1),xt={class:"col-md-3 mt-5 mb-3"},Vt={class:"form-check"},kt=t("label",{class:"form-check-label",for:"is_enabled"},"是否熱銷",-1),Ut={class:"col-md-3 mt-5 mb-3"},Nt={class:"form-check"},Dt=t("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1),Ct={class:"modal-footer"},St=t("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function Lt(i,o,n,b,e,r){return a(),u("div",U,[t("div",N,[t("div",D,[t("div",C,[t("h5",S,[n.isNew?(a(),u("span",L,"新增產品")):(a(),u("span",E,"編輯產品"))]),B]),t("div",O,[t("div",R,[t("div",A,[t("div",I,[J,s(t("input",{id:"image","onUpdate:modelValue":o[0]||(o[0]=l=>e.editProduct.image=l),type:"text",class:"form-control mb-2",placeholder:"請輸入圖片連結"},null,512),[[d,e.editProduct.image]]),t("img",{class:"img-fluid",src:e.editProduct.image},null,8,T)])]),t("div",F,[t("div",G,[j,s(t("input",{id:"title","onUpdate:modelValue":o[1]||(o[1]=l=>e.editProduct.chineseName=l),type:"text",class:"form-control",placeholder:"請輸入產品名稱"},null,512),[[d,e.editProduct.chineseName]])]),t("div",q,[z,s(t("input",{id:"engtitle","onUpdate:modelValue":o[2]||(o[2]=l=>e.editProduct.englishName=l),type:"text",class:"form-control",placeholder:"請輸入英文名稱"},null,512),[[d,e.editProduct.englishName]])]),t("div",H,[t("div",K,[Q,s(t("input",{id:"category","onUpdate:modelValue":o[3]||(o[3]=l=>e.editProduct.wineStyle=l),type:"text",class:"form-control",placeholder:"請輸入分類"},null,512),[[d,e.editProduct.wineStyle]])]),t("div",W,[X,s(t("input",{id:"place","onUpdate:modelValue":o[4]||(o[4]=l=>e.editProduct.place=l),type:"text",class:"form-control",placeholder:"請輸入產區"},null,512),[[d,e.editProduct.place]])]),t("div",Y,[Z,s(t("input",{id:"price","onUpdate:modelValue":o[5]||(o[5]=l=>e.editProduct.price=l),type:"number",min:"0",class:"form-control",placeholder:"請輸入售價"},null,512),[[d,e.editProduct.price,void 0,{number:!0}]])])]),t("div",$,[t("div",tt,[ot,s(t("input",{id:"village","onUpdate:modelValue":o[6]||(o[6]=l=>e.editProduct.village=l),type:"text",class:"form-control",placeholder:"請輸入酒莊"},null,512),[[d,e.editProduct.village]])]),t("div",et,[lt,s(t("input",{id:"grape","onUpdate:modelValue":o[7]||(o[7]=l=>e.editProduct.grape=l),class:"form-control",placeholder:"請輸入葡萄品種"},null,512),[[d,e.editProduct.grape]])])]),st,t("div",dt,[t("div",it,[nt,s(t("input",{id:"flavor","onUpdate:modelValue":o[8]||(o[8]=l=>e.editProduct.flavor=l),type:"text",class:"form-control",placeholder:"請輸入風味"},null,512),[[d,e.editProduct.flavor]])]),t("div",rt,[ct,s(t("input",{id:"food","onUpdate:modelValue":o[9]||(o[9]=l=>e.editProduct.food=l),type:"text",class:"form-control",placeholder:"請輸入搭餐"},null,512),[[d,e.editProduct.food]])])]),t("div",at,[t("div",ut,[mt,s(t("input",{id:"tannin","onUpdate:modelValue":o[10]||(o[10]=l=>e.editProduct.taste.tannin=l),type:"text",class:"form-control",placeholder:"請輸入單寧"},null,512),[[d,e.editProduct.taste.tannin]])]),t("div",pt,[_t,s(t("input",{id:"body","onUpdate:modelValue":o[11]||(o[11]=l=>e.editProduct.taste.body=l),type:"text",class:"form-control",placeholder:"請輸入酒體"},null,512),[[d,e.editProduct.taste.body]])]),t("div",ht,[bt,s(t("input",{id:"acidity","onUpdate:modelValue":o[12]||(o[12]=l=>e.editProduct.taste.acidity=l),class:"form-control",placeholder:"請輸入酸度"},null,512),[[d,e.editProduct.taste.acidity]])]),t("div",ft,[Pt,s(t("input",{id:"sweet","onUpdate:modelValue":o[13]||(o[13]=l=>e.editProduct.taste.sweet=l),class:"form-control",placeholder:"請輸入甜度"},null,512),[[d,e.editProduct.taste.sweet]])])]),t("div",vt,[t("div",yt,[gt,s(t("input",{id:"num","onUpdate:modelValue":o[14]||(o[14]=l=>e.editProduct.num=l),type:"number",min:"0",class:"form-control",placeholder:"請輸入數量"},null,512),[[d,e.editProduct.num,void 0,{number:!0}]])]),t("div",wt,[Mt,s(t("input",{id:"star","onUpdate:modelValue":o[15]||(o[15]=l=>e.editProduct.star=l),type:"number",min:"1",max:"5",class:"form-control",placeholder:"請輸入評分"},null,512),[[d,e.editProduct.star,void 0,{number:!0}]])]),t("div",xt,[t("div",Vt,[s(t("input",{id:"is_enabled","onUpdate:modelValue":o[16]||(o[16]=l=>e.editProduct.is_hot=l),class:"form-check-input",type:"checkbox","true-value":1,"false-value":0},null,512),[[f,e.editProduct.is_hot]]),kt])]),t("div",Ut,[t("div",Nt,[s(t("input",{id:"is_enabled","onUpdate:modelValue":o[17]||(o[17]=l=>e.editProduct.is_enabled=l),class:"form-check-input",type:"checkbox","true-value":1,"false-value":0},null,512),[[f,e.editProduct.is_enabled]]),Dt])])])])])]),t("div",Ct,[St,t("button",{type:"button",class:"btn btn-primary",onClick:o[18]||(o[18]=(...l)=>n.updateProduct&&n.updateProduct(...l))},"確認")])])])],512)}const Et=h(k,[["render",Lt]]),Bt={props:["tempProduct","delProduct"],data(){return{delModalProduct:null}},methods:{openDelModal(){this.delModalProduct.show()},closeDelModal(){this.delModalProduct.hide()}},mounted(){this.delModalProduct=new w(this.$refs.delProductModal)}},Ot={id:"delProductModal",ref:"delProductModal",class:"modal fade",tabindex:"-1","aria-labelledby":"delProductModalLabel","aria-hidden":"true"},Rt={class:"modal-dialog"},At={class:"modal-content border-0"},It=t("div",{class:"modal-header bg-danger text-white"},[t("h5",{id:"delProductModalLabel",class:"modal-title"},[t("span",null,"刪除產品")]),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Jt={class:"modal-body"},Tt={class:"text-danger"},Ft={class:"modal-footer"},Gt=t("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function jt(i,o,n,b,e,r){return a(),u("div",Ot,[t("div",Rt,[t("div",At,[It,t("div",Jt,[P(" 是否刪除 "),t("strong",Tt,m(n.tempProduct.chineseName),1),P(" 商品(刪除後將無法恢復)。 ")]),t("div",Ft,[Gt,t("button",{type:"button",class:"btn btn-danger",onClick:o[0]||(o[0]=(...l)=>n.delProduct&&n.delProduct(...l))},"確認刪除")])])])],512)}const qt=h(Bt,[["render",jt]]);var zt={BASE_URL:"/undefined/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API_URL:p}=zt,Ht={name:"AdminProductsView",components:{ProductModal:Et,DelModal:qt},data(){return{title:"商品管理",products:[],tempProduct:{image:"",flavor:[],taste:{tannin:"",body:"",acidity:"",sweet:""}},pages:{},modalProduct:null,delModalProduct:null,isNew:!1,newProduct:{}}},mounted(){this.getData()},methods:{getData(){const i=`${p}/products`;_.get(i).then(o=>{console.log(o.data),this.products=o.data}).catch(()=>{alert("取得產品資訊失敗")})},updateProduct(){let i=`${p}/products`,o="post";this.isNew||(i=`${p}/products/${this.tempProduct.id}`,o="put"),this.newProduct=JSON.parse(JSON.stringify(this.tempProduct)),typeof this.newProduct.flavor=="string"&&(this.newProduct.flavor=this.newProduct.flavor.split(",")),typeof this.newProduct.food=="string"&&(this.newProduct.food=this.newProduct.food.split(",")),typeof this.newProduct.grape=="string"&&(this.newProduct.grape=this.newProduct.grape.split(",")),_[o](i,this.newProduct).then(n=>{alert("新增/修改成功"),this.getData(),this.$refs.pModal.closeModal()}).catch(()=>{alert("新增/修改失敗")})},openModal(i,o){i==="new"?(this.tempProduct={image:"",flavor:[],taste:{tannin:"",body:"",acidity:"",sweet:""}},this.isNew=!0,this.$refs.pModal.openModal()):i==="edit"?(this.tempProduct={...o},this.isNew=!1,this.$refs.pModal.openModal()):i==="delete"&&(this.tempProduct={...o},this.$refs.delModal.openDelModal())},delProduct(){const i=`${p}/products/${this.tempProduct.id}`;_.delete(i).then(o=>{alert("刪除成功"),this.$refs.delModal.closeDelModal(),this.getData()}).catch(()=>{alert("刪除失敗")})},createImages(){this.tempProduct.imagesUrl=[],this.tempProduct.imagesUrl.push("")}}},Kt={class:"row"},Qt={class:"mt-3"},Wt={class:"text-end mt-4"},Xt={class:"table mt-4"},Yt=t("thead",null,[t("tr",null,[t("th",{width:"120"},"分類"),t("th",null,"產品名稱"),t("th",{width:"120"},"售價"),t("th",{width:"120"},"編輯")])],-1),Zt={class:"btn-group"},$t=["onClick"],to=["onClick"];function oo(i,o,n,b,e,r){const l=g("Product-Modal"),M=g("Del-Modal");return a(),u(v,null,[t("div",Kt,[t("h1",Qt,m(e.title),1),t("div",Wt,[t("button",{class:"btn btn-primary",onClick:o[0]||(o[0]=c=>r.openModal("new"))},"建立新的產品")]),t("table",Xt,[Yt,t("tbody",null,[(a(!0),u(v,null,V(e.products,c=>(a(),u("tr",{key:c.id},[t("td",null,m(c.wineStyle),1),t("td",null,m(c.chineseName),1),t("td",null,m(c.price),1),t("td",null,[t("div",Zt,[t("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:x=>r.openModal("edit",c)}," 編輯 ",8,$t),t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:x=>r.openModal("delete",c)}," 刪除 ",8,to)])])]))),128))])])]),y(l,{"temp-product":e.tempProduct,"update-product":r.updateProduct,"is-New":e.isNew,ref:"pModal"},null,8,["temp-product","update-product","is-New"]),y(M,{"temp-product":e.tempProduct,"del-product":r.delProduct,ref:"delModal"},null,8,["temp-product","del-product"])],64)}const so=h(Ht,[["render",oo]]);export{so as default};
