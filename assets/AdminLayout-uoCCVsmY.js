import{_ as m,g as _,c as p,a as t,b as e,w as a,r as d,o as u,d as n,p as h,e as f}from"./index-_sTTT7DT.js";import{S as v}from"./sweetalert2.all-bhEUQfIR.js";import{_ as k}from"./Logo-PzWtV9KY.js";const $={name:"AdminLayout",components:{},data(){return{title:"後台頁面"}},mounted(){const o=document.cookie.replace(/(?:(?:^|.*;\s*)adminToken\s*=\s*([^;]*).*$)|^.*$/,"$1"),i=document.cookie.replace(/(?:(?:^|.*;\s*)adminId\s*=\s*([^;]*).*$)|^.*$/,"$1");!o||!i?this.logout():(_.defaults.headers.common.Authorization=`Bearer ${o}`,this.adminCheck(i))},methods:{adminCheck(o){const i=`https://wine-project-tmiy.onrender.com/600/users/${o}`;this.$http.get(i).then(c=>{c.data.role!=="admin"&&this.logout()}).catch(c=>{console.log(c.response),this.logout()})},logout(){document.cookie=`adminToken=0; expires=${new Date("2000/1/1 12:00")}; path=/`,document.cookie=`adminId=0; expires=${new Date("2000/1/1 12:00")}; path=/`,v.fire({title:"無授權，請重新登入",text:"",icon:"error"}),this.$router.push("/adminLogin")}}},l=o=>(h("data-v-adeef7f1"),o=o(),f(),o),g={class:"container-fluid"},x={class:"row vh-100"},w={class:"col-2 bg-accent-brown pt-5"},I=l(()=>t("div",{class:"text-center"},[t("img",{src:k,alt:"logo",class:"img-fluid mb-6 px-2 logo"})],-1)),C={class:"nav flex-column px-2"},L={class:"nav-item"},S={class:"nav-item"},V={class:"nav-item"},b={class:"nav-item"},y={class:"nav-item"},B={class:"nav-item"},R={class:"nav-item mt-5"},T=l(()=>t("span",{class:"material-icons"}," logout ",-1)),A={class:"col-10 py-5"},N={class:"container"};function D(o,i,c,j,z,E){const s=d("RouterLink"),r=d("RouterView");return u(),p("div",g,[t("div",x,[t("div",w,[I,t("ul",C,[t("li",L,[e(s,{to:"/admin/accounts",class:"nav-link"},{default:a(()=>[n("帳戶管理")]),_:1})]),t("li",S,[e(s,{to:"/admin/products",class:"nav-link"},{default:a(()=>[n("商品管理")]),_:1})]),t("li",V,[e(s,{to:"/admin/orders",class:"nav-link"},{default:a(()=>[n("訂單管理")]),_:1})]),t("li",b,[e(s,{to:"/admin/comments",class:"nav-link"},{default:a(()=>[n("評論管理")]),_:1})]),t("li",y,[e(s,{to:"/admin/sales",class:"nav-link"},{default:a(()=>[n("銷售數據")]),_:1})]),t("li",B,[e(s,{to:"/",class:"nav-link"},{default:a(()=>[n("回前台首頁")]),_:1})]),t("li",R,[e(s,{to:"/adminLogin",class:"nav-link d-flex align-items-center"},{default:a(()=>[T,n("登出")]),_:1})])])]),t("div",A,[t("div",N,[e(r)])])])])}const H=m($,[["render",D],["__scopeId","data-v-adeef7f1"]]);export{H as default};
