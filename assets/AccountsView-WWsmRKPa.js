import{_ as b,o as a,c,a as e,d as _,t as l,h,F as m,j as f,b as A,r as v,p as $,f as g}from"./index-ln-Pv9Z8.js";import{M as U}from"./bootstrap.esm-uhsrVe-H.js";import{h as w}from"./header_line-t2L8Dpyx.js";import{A as u}from"./swal-rnDHqlvf.js";import"./sweetalert2.all-XoCN0Ps3.js";const x={props:["tempUser","delUser"],data(){return{delModalAccount:null}},methods:{openDelModal(){this.delModalAccount.show()},closeDelModal(){this.delModalAccount.hide()}},mounted(){this.delModalAccount=new U(this.$refs.delAccountModal)}},y={id:"delAccountModal",ref:"delAccountModal",class:"modal fade",tabindex:"-1","aria-labelledby":"delAccountModalLabel","aria-hidden":"true"},D={class:"modal-dialog"},E={class:"modal-content border-0"},I=e("div",{class:"modal-header bg-danger text-white"},[e("h5",{id:"delAccountModalLabel",class:"modal-title"},[e("span",null,"刪除帳戶")]),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),V={class:"modal-body"},L={class:"text-danger"},S={class:"modal-footer"},T=e("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function k(t,s,n,M,o,r){return a(),c("div",y,[e("div",D,[e("div",E,[I,e("div",V,[_(" 是否刪除 "),e("strong",L,l(n.tempUser.name),1),_(" 帳戶(刪除後將無法恢復)。 ")]),e("div",S,[T,e("button",{type:"button",class:"btn btn-danger",onClick:s[0]||(s[0]=(...i)=>n.delUser&&n.delUser(...i))},"確認刪除")])])])],512)}const R=b(x,[["render",k]]);var C={VITE_API_URL:"https://wine-project-tmiy.onrender.com",VITE_REPO_NAME:"Wine-project",BASE_URL:"/Wine-project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API_URL:p}=C,j={name:"AdminAccountsView",components:{DelAccountModal:R},data(){return{title:"帳戶管理",headerLine:w,users:[],tempUser:{}}},mounted(){this.getAccounts()},methods:{getAccounts(){const t=`${p}/users`;h.get(t).then(s=>{this.users=s.data}).catch(()=>{u.toastTop("error","取得帳戶資訊失敗")})},delUser(){const t=`${p}/users/${this.tempUser.id}`;h.delete(t).then(s=>{u.toastTop("success","刪除成功"),this.$refs.delModal.closeDelModal(),this.getAccounts()}).catch(()=>{u.toastTop("error","刪除失敗")})},openModal(t){this.tempUser={...t},this.$refs.delModal.openDelModal()}}},B=t=>($("data-v-d7583c2a"),t=t(),g(),t),N={class:"row"},P={class:"my-3"},O={class:"header-line"},F=["src"],W={class:"row"},q={class:"table mt-4 mx-2"},z=B(()=>e("thead",{class:"table-light"},[e("tr",null,[e("th",{width:"120"},"身分"),e("th",{width:"120"},"名稱"),e("th",{width:"120"},"電子信箱"),e("th",{width:"120",class:"text-center"},"刪除帳戶")])],-1)),G={class:"text-center"},H=["onClick"];function J(t,s,n,M,o,r){const i=v("DelAccountModal");return a(),c(m,null,[e("div",N,[e("h1",P,l(o.title),1),e("div",O,[e("img",{src:o.headerLine,alt:"header line"},null,8,F)]),e("div",W,[e("div",null,[e("table",q,[z,e("tbody",null,[(a(!0),c(m,null,f(o.users,d=>(a(),c("tr",{key:d.id},[e("td",null,l(d.role),1),e("td",null,l(d.username),1),e("td",null,l(d.email),1),e("td",G,[e("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:K=>r.openModal(d)}," 刪除 ",8,H)])]))),128))])])])])]),A(i,{"temp-user":o.tempUser,"del-user":r.delUser,ref:"delModal"},null,8,["temp-user","del-user"])],64)}const te=b(j,[["render",J],["__scopeId","data-v-d7583c2a"]]);export{te as default};
